<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  
  <title>inBetween</title>
  
  <meta name="description" content="inBetween" />
  <meta name="keywords" value="inBetween webapp HTML5 jquery geolocation javascript" />

  <script type="text/javascript" src="js/jquery.min.js"> </script>
  <script src="http://maps.google.com/maps/api/js?sensor=false"> </script>

  <script type="text/javascript" src="js/findPlaces.js"> </script>

 <script> 
    $(document).ready(function() { 

	}); 

    function getLat(address, callback) {
        if (address) {
			// console.log(address);
            var geocoder = new google.maps.Geocoder();
            geocoder.geocode({ 'address': address }, function (results, status) {
                var result = 0;
				if (status == google.maps.GeocoderStatus.OK) {
                    if (results[0]) {
						var lati = results[0].geometry.location.lat();
						console.log(lati);
						result = lati;
                    }
				}
				callback(result);
            });
        }
        else {
			callback(0);
    	}
    }

    function getLon(address,callback) {
        if (address) {
            // console.log(address);
			var geocoder = new google.maps.Geocoder();
            geocoder.geocode({ 'address': address }, function (results, status) {
				var result = 0;
                if (status == google.maps.GeocoderStatus.OK) {
                    if (results[0]) {
						var longi = results[0].geometry.location.lng();
						console.log(longi);
						result = longi;
                    }
				}
				callback(result);
            });
        	}
        else {
           	// error('Please enter an address');
			callback(0);
		}
    }
		
		function formSubmit() {
			var yours = '';
			var other = '';
			var interest = '';

				yours = document.getElementById("yourPlace").value;
				other = document.getElementById("otherPlace").value;
				interest = document.getElementById("interestType").value;

				findLatLong(yours, other, interest);
			}

		function findLatLong(yours, other, interest) {
			var latitude = 0;
			var longitude = 0;

			var yourLoc = yours;
			var otherLoc = other;
			var poi = interest;

			var latitude = 0;
			var longitude = 0;

			getLat(yourLoc, function(yourLat) {
				getLat(otherLoc, function(otherLat) {
					getLon(yourLoc, function(yourLon) {
						getLon(otherLoc, function(otherLon) {

							console.log(yourLat);
							console.log(otherLat);

			
							console.log(yourLon);
							console.log(otherLon);

							latitude = (yourLat + otherLat)/2;
							 console.log(latitude);

							longitude = (yourLon + otherLon)/2;
							 console.log(longitude);

							printLocs(latitude, longitude, interest);
							// printLocs(40.5592,-7,4.3164,'');

						});
					});
				});
			});

	    }

 </script>

	<link rel="stylesheet" type="text/css" href="css/style.css" />

</head>
<body>

	<div id="logo">
		<center>
			<h1>inBetween</h1>
		</center>
	</div>

	<div id="head">
		<center>
			Tell us where you are, and where your friend is. <br />
			We'll help you find cool places <strong><em>inBetween</em></strong> you! <br />
			</br>
		</center>
	</div>

	<div id="top">
		<center>
		<form id="your_loc" method="post" action="javascript:formSubmit()">
			<label for="yourPlace">Where are you now? </label>
			<input type="text" id="yourPlace" name="yourPlace" size="25" maxLength="160"></input>
			<br />
			<label for="otherPlace">Where's your friend? </label>
			<input type="text" id="otherPlace" name="otherPlace" size="25" maxLength="160"></input>
			<br />
			<label for="interestType">Place of interest? </label>
			<input type="text" id="interestType" name="interestType" size="25" maxLength="160"></input>
			<br /> <br />
			<input type="submit" id="submit" name="submit" value="Let's go!" />
			<br />
		</form>
		</center>
	</div>
	
	<div id="head">
		<center>
			<br /> Now check out the awesome places nearby! <br />
		</center>
	</div>

	<div id="map_canvas"></div>
	<div id="names"></div>
</body>
</html>